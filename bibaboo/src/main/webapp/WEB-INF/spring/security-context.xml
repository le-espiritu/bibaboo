<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:beans="http://www.springframework.org/schema/beans"
	xsi:schemaLocation=
	"http://www.springframework.org/schema/security 
	http://www.springframework.org/schema/security/spring-security-4.2.xsd
	http://www.springframework.org/schema/beans 
	https://www.springframework.org/schema/beans/spring-beans.xsd">
	
	<!-- URL 설정 -->
	<!-- http태그는 경로를 매핑하여 필터체인의 실행여부를 설정한다. -->
	
	<!-- 인증 예외 경로 설정 / 아래 설정을 해주지 않으면 css, img 파일등이 깨져서 보임 -->
	<http pattern="/**/*.css" security="none"></http>
	<http pattern="/**/*.js" security="none"></http>
	<http pattern="/img/**" security="none"></http>
	
	<http auto-config="true" use-expressions="true">
		<!-- auto-config="true"를 설정하면 필터체인의 default값이 설정된다. - 스프링 시큐리티가 기본 로그인페이지를 제공해준다. -->
		
		<!-- patter에 해당하는 경로에 대해 인터셉터의 역할을 하며, 스프링 시큐리티는 인터셉터를 이용하여 권한확인을 한다. -->
		<intercept-url pattern="/" access="permitAll"/> <!-- index.jsp등 웰컴파일이 있으면 해당 메인 url에 대한 설정이 적용되지 않음 -->
		<intercept-url pattern="/**" access="hasAnyRole('USER, ADMIN')"/>
	
		<csrf disabled="true"/> <!-- 스프링 시큐리티 4 부터는 CSRF 방지 기능이 디폴트로 작동한다.  -->
	</http>
	
	<authentication-manager>
		<authentication-provider>
			<user-service>
				<user name="admin" password="admin" authorities="ROLE_ADMIN"/>
				<user name="user" password="user" authorities="ROLE_USER"/>
			</user-service>
		</authentication-provider>
	</authentication-manager>
	
</beans:beans>